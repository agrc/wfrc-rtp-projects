{
  "$id": "https://wfrc.org/??/config.schema.json",
  "$schema": "http://json-schema.org/draft/2019-09/schema#",
  "title": "WFRC RTP Projects Application Configuration",
  "description": "Configuration for the WFRC RTP Projects Application",
  "type": "object",
  "definitions": {
    "projectType": {
      "additionalProperties": false,
      "properties": {
        "lines": {
          "description": "The query that will be applied to the line layers",
          "title": "Lines Query",
          "type": ["string", "null"]
        },
        "offByDefault": {
          "description": "Whether the associated checkbox is off on app load",
          "title": "Off By Default",
          "type": "boolean"
        },
        "points": {
          "description": "The query that will be applied to the point layers",
          "title": "Points Query",
          "type": ["string", "null"]
        },
        "useAnd": {
          "description": "Whether the query should use AND or OR",
          "title": "Use AND",
          "type": "boolean"
        }
      },
      "required": ["lines", "points"],
      "title": "Project Type",
      "type": "object"
    },
    "translation": {
      "additionalProperties": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "type": "object"
          }
        ]
      },
      "properties": {
        "mapTabsDialog": {
          "additionalProperties": {
            "type": "string"
          },
          "required": ["availableHeader", "maxMessage", "selectedHeader", "title"],
          "type": "object"
        }
      },
      "title": "Translation",
      "type": "object"
    }
  },
  "required": [
    "appTitle",
    "defaultExtent",
    "filter",
    "layerSelector",
    "openOnLoad",
    "outFields",
    "projectInformation",
    "sherlock",
    "splashScreen",
    "translations",
    "webMapId"
  ],
  "additionalProperties": false,
  "properties": {
    "appTitle": {
      "title": "Application Title",
      "description": "The title of the application",
      "type": "string"
    },
    "defaultExtent": {
      "title": "Default Map Extent",
      "description": "The default extent of the map on load. Also controls the extent for the home button",
      "type": "object",
      "required": ["x", "y", "scale"],
      "additionalProperties": false,
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "scale": {
          "type": "number"
        }
      }
    },
    "filter": {
      "title": "Filter Widget Configuration",
      "description": "Configuration options for the filter widget",
      "type": "object",
      "required": ["disableAdvanced", "fieldNames", "infoText", "labels", "layerNames", "projectTypes", "symbolValues"],
      "additionalProperties": false,
      "properties": {
        "disableAdvanced": {
          "title": "Disable Advanced Filter",
          "description": "Whether the advanced filter should be disabled",
          "type": "boolean"
        },
        "fieldNames": {
          "title": "Field Names",
          "description": "The field names in the points and line layers",
          "type": "object",
          "required": ["cost", "mode", "phase", "phaseNeeded"],
          "additionalProperties": false,
          "properties": {
            "cost": {
              "title": "Cost",
              "type": "string"
            },
            "mode": {
              "title": "Mode",
              "type": "string"
            },
            "phase": {
              "title": "Phase",
              "type": "string"
            },
            "phaseNeeded": {
              "title": "Phase Needed",
              "type": "string"
            }
          }
        },
        "infoText": {
          "title": "Info Popup Content",
          "description": "An object that contains the content that will show up in the info popups",
          "type": "object",
          "additionalProperties": false,
          "required": ["cost", "phaseYears", "projectType", "simpleMode", "simplePhase"],
          "properties": {
            "cost": {
              "title": "Advanced Filter - Cost",
              "type": "string"
            },
            "phaseYears": {
              "title": "Advanced Filter - Phase Years",
              "type": "string"
            },
            "projectType": {
              "title": "Advanced Filter - Project Types",
              "type": "string"
            },
            "simpleMode": {
              "title": "Simple Filter - Mode Tab",
              "type": "string"
            },
            "simplePhase": {
              "title": "Simple Filter - Phase Tab",
              "type": "string"
            }
          }
        },
        "labels": {
          "title": "Primary Checkbox Labels",
          "description": "The labels for the primary checkboxes",
          "type": "object",
          "additionalProperties": false,
          "required": ["mode", "phase"],
          "properties": {
            "mode": {
              "title": "Mode Type Labels",
              "type": "object",
              "additionalProperties": false,
              "required": ["road", "transit", "activeTransportation"],
              "properties": {
                "road": {
                  "title": "Road",
                  "type": "string"
                },
                "transit": {
                  "title": "Transit",
                  "type": "string"
                },
                "activeTransportation": {
                  "title": "Active Transportation",
                  "type": "string"
                }
              }
            },
            "phase": {
              "title": "Phase Labels",
              "type": "object",
              "additionalProperties": false,
              "required": ["one", "two", "three", "unfunded"],
              "properties": {
                "one": {
                  "title": "Phase 1",
                  "type": "string"
                },
                "two": {
                  "title": "Phase 2",
                  "type": "string"
                },
                "three": {
                  "title": "Phase 3",
                  "type": "string"
                },
                "unfunded": {
                  "title": "Unfunded",
                  "type": "string"
                }
              }
            }
          }
        },
        "layerNames": {
          "title": "Layer Names",
          "description": "The layer names in the web map",
          "type": "object",
          "additionalProperties": false,
          "required": ["modeLines", "modePoints", "phaseLines", "phasePoints"],
          "properties": {
            "modeLines": {
              "title": "Mode Lines",
              "type": "string"
            },
            "modePoints": {
              "title": "Mode Points",
              "type": "string"
            },
            "phaseLines": {
              "title": "Phase Lines",
              "type": "string"
            },
            "phasePoints": {
              "title": "Phase Points",
              "type": "string"
            }
          }
        },
        "projectTypes": {
          "title": "Project Types",
          "description": "An array of project types",
          "type": "object",
          "additionalProperties": false,
          "required": ["road", "transit", "activeTransportation"],
          "properties": {
            "road": {
              "title": "Road",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/projectType"
              }
            },
            "transit": {
              "title": "Transit",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/projectType"
              }
            },
            "activeTransportation": {
              "title": "Active Transportation",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/projectType"
              }
            }
          }
        },
        "symbolValues": {
          "title": "Symbol Values",
          "description": "The values corresponding to the symbology in the web map",
          "type": "object",
          "additionalProperties": false,
          "required": ["mode", "phase"],
          "properties": {
            "mode": {
              "title": "Mode",
              "type": "object",
              "additionalProperties": false,
              "required": ["road", "transit", "activeTransportation"],
              "properties": {
                "road": {
                  "title": "Road",
                  "type": "string"
                },
                "transit": {
                  "title": "Transit",
                  "type": "string"
                },
                "activeTransportation": {
                  "title": "Active Transportation",
                  "type": "string"
                }
              }
            },
            "phase": {
              "title": "Phase",
              "type": "object",
              "additionalProperties": false,
              "required": ["one", "two", "three", "unfunded"],
              "properties": {
                "one": {
                  "title": "One",
                  "type": "string"
                },
                "two": {
                  "title": "Two",
                  "type": "string"
                },
                "three": {
                  "title": "Three",
                  "type": "string"
                },
                "unfunded": {
                  "title": "Unfunded",
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "layerSelector": {
      "description": "Configuration options for the base map selector widget",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "baseLayers": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "id": {
                    "description": "The name of the layer",
                    "type": "string"
                  },
                  "Factory": {
                    "description": "The name of the esrijs module associated with the layer type",
                    "type": "string"
                  },
                  "urlTemplate": {
                    "description": "The urlTemplate for the layer. \"{quadWord}\" will be automatically replaced with the appropriate value at runtime.",
                    "type": "string"
                  }
                },
                "required": ["id", "Factory", "urlTemplate"]
              }
            ]
          }
        },
        "overlays": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "id": {
                    "description": "The name of the layer",
                    "type": "string"
                  },
                  "Factory": {
                    "description": "The name of the esrijs module associated with the layer type",
                    "type": "string"
                  },
                  "url": {
                    "description": "The url for the layer",
                    "type": "string"
                  },
                  "opacity": {
                    "type": "number"
                  }
                },
                "required": ["id", "Factory", "url"]
              }
            ]
          }
        }
      }
    },
    "openOnLoad": {
      "title": "Open On Load",
      "description": "Controls whether specific map widgets default to be open on page load",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "filter": {
          "type": "boolean"
        },
        "projectInfo": {
          "type": "boolean"
        }
      }
    },
    "outFields": {
      "title": "Out Fields",
      "description": "The fields that will be requested along with the features displayed in the map",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "projectInformation": {
      "title": "Project Information Widget Config",
      "description": "Configuration options for the project information widget",
      "type": "object",
      "additionalProperties": false,
      "required": ["commentsEnabled", "commentsTableUrl", "fieldNames", "commentsEnabledUntil"],
      "properties": {
        "commentsEnabled": {
          "title": "Comments Enabled",
          "description": "Whether the comments widget is enabled",
          "type": "boolean"
        },
        "commentsTableUrl": {
          "title": "Comments Table URL",
          "description": "The URL to the feature service endpoint for the comments table",
          "type": "string"
        },
        "fieldNames": {
          "title": "Field Names",
          "description": "An object that contains the field names for the comments table",
          "type": "object",
          "additionalProperties": false,
          "required": ["comment", "commentDt", "globalId", "guid", "personCont", "personName", "personOrg"],
          "properties": {
            "comment": {
              "title": "Comment",
              "type": "string"
            },
            "commentDt": {
              "title": "Comment Date",
              "type": "string"
            },
            "globalId": {
              "title": "Global ID",
              "type": "string"
            },
            "guid": {
              "title": "GUID",
              "type": "string"
            },
            "personCont": {
              "title": "Person Contact",
              "type": "string"
            },
            "personName": {
              "title": "Person Name",
              "type": "string"
            },
            "personOrg": {
              "title": "Person Organization",
              "type": "string"
            }
          }
        },
        "commentsEnabledUntil": {
          "title": "Comments Enabled Until",
          "description": "The date after which comments will be shown.",
          "type": "string"
        }
      }
    },
    "sherlock": {
      "title": "Sherlock Widget Config",
      "description": "Configuration options for the map search widget",
      "type": "object",
      "additionalProperties": false,
      "required": ["searchField", "serviceUrl"],
      "properties": {
        "placeHolder": {
          "description": "The place holder text that shows up in the text box before a user starts typing.",
          "type": "string"
        },
        "searchField": {
          "description": "The name of the field that you would like the search to be applied to.",
          "type": "string"
        },
        "serviceUrl": {
          "description": "The URL to the service that you would like to search features on.",
          "type": "string"
        }
      }
    },
    "splashScreen": {
      "title": "Splash Screen Config",
      "description": "Configuration options for the splash screen",
      "type": "object",
      "additionalProperties": false,
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "title": "Enabled",
          "description": "Whether the splash screen is enabled",
          "type": "boolean"
        },
        "title": {
          "title": "Title",
          "description": "The title of the splash screen",
          "type": "string"
        },
        "content": {
          "title": "Content",
          "description": "The content of the splash screen",
          "type": "string"
        }
      }
    },
    "translations": {
      "title": "Translations",
      "description": "Contains the translated strings used in the app. Falls back to `en` if there is no other translation. Most strings in the other configs can be translated by using this format: `trans:<key>`. For example: `trans:visionMapTitle`.",
      "type": "object",
      "required": ["en"],
      "properties": {
        "en": {
          "title": "English",
          "type": "object",
          "additionalProperties": false,
          "required": ["translation"],
          "properties": {
            "translation": {
              "$ref": "#/definitions/translation",
              "required": [
                "appTitle",
                "filter",
                "filterByPhasing",
                "mapTabsDialog",
                "projectInformation",
                "projectInformationPrompt",
                "reset",
                "searchPlaceholder",
                "tagLine"
              ]
            }
          }
        }
      },
      "additionalProperties": {
        "type": "object",
        "additionalProperties": false,
        "required": ["translation"],
        "properties": {
          "translation": {
            "$ref": "#/definitions/translation"
          }
        }
      }
    },
    "webMapId": {
      "title": "Web Map ID",
      "description": "The AGOL ID of the web map that will be displayed in the app",
      "type": "string"
    }
  }
}
